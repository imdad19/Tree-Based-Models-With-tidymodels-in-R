<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aouidane Imed Eddine">
<meta name="dcterms.date" content="2024-10-30">
<meta name="keywords" content="Decision Trees, Machine Learning, Model Tuning, Loans Dataset, Boosting trees">
<meta name="description" content="Optimizing Decision Making using Cross validation and hyperparameter tuning methods on a loans dataset">

<title>Predicting Loans Using Tree-Based Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Tree_based_models_files/libs/clipboard/clipboard.min.js"></script>
<script src="Tree_based_models_files/libs/quarto-html/quarto.js"></script>
<script src="Tree_based_models_files/libs/quarto-html/popper.min.js"></script>
<script src="Tree_based_models_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Tree_based_models_files/libs/quarto-html/anchor.min.js"></script>
<link href="Tree_based_models_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Tree_based_models_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Tree_based_models_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Tree_based_models_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Tree_based_models_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="Tree_based_models_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="Tree_based_models_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>

<link href="Tree_based_models_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="Tree_based_models_files/libs/datatables-binding-0.30/datatables.js"></script>

<script src="Tree_based_models_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="Tree_based_models_files/libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="Tree_based_models_files/libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="Tree_based_models_files/libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>

<link href="Tree_based_models_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">

<script src="Tree_based_models_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>



<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#introduction-to-the-loans-dataset" id="toc-introduction-to-the-loans-dataset" class="nav-link active" data-scroll-target="#introduction-to-the-loans-dataset"><span class="header-section-number">1</span> Introduction to the Loans Dataset</a></li>
  <li><a href="#statistical-summary-of-the-dataset" id="toc-statistical-summary-of-the-dataset" class="nav-link" data-scroll-target="#statistical-summary-of-the-dataset"><span class="header-section-number">2</span> Statistical Summary of the Dataset</a></li>
  <li><a href="#correlation-analysis" id="toc-correlation-analysis" class="nav-link" data-scroll-target="#correlation-analysis"><span class="header-section-number">3</span> Correlation Analysis</a></li>
  <li><a href="#data-splitting" id="toc-data-splitting" class="nav-link" data-scroll-target="#data-splitting"><span class="header-section-number">4</span> Data Splitting</a></li>
  <li><a href="#feature-engineering-and-data-preprocessing" id="toc-feature-engineering-and-data-preprocessing" class="nav-link" data-scroll-target="#feature-engineering-and-data-preprocessing"><span class="header-section-number">5</span> Feature Engineering and Data Preprocessing</a>
  <ul class="collapse">
  <li><a href="#creating-cross-validation-folds" id="toc-creating-cross-validation-folds" class="nav-link" data-scroll-target="#creating-cross-validation-folds"><span class="header-section-number">5.1</span> Creating cross validation folds</a></li>
  </ul></li>
  <li><a href="#model-selection-and-comparison" id="toc-model-selection-and-comparison" class="nav-link" data-scroll-target="#model-selection-and-comparison"><span class="header-section-number">6</span> Model Selection and Comparison</a>
  <ul class="collapse">
  <li><a href="#decision-tree" id="toc-decision-tree" class="nav-link" data-scroll-target="#decision-tree"><span class="header-section-number">6.1</span> 1. Decision Tree</a></li>
  <li><a href="#bagged-trees" id="toc-bagged-trees" class="nav-link" data-scroll-target="#bagged-trees"><span class="header-section-number">6.2</span> 2. Bagged Trees</a></li>
  <li><a href="#random-forest" id="toc-random-forest" class="nav-link" data-scroll-target="#random-forest"><span class="header-section-number">6.3</span> 3. Random Forest</a></li>
  <li><a href="#boosted-trees" id="toc-boosted-trees" class="nav-link" data-scroll-target="#boosted-trees"><span class="header-section-number">6.4</span> 4. Boosted Trees</a></li>
  <li><a href="#hyperparameter-tuning-grids" id="toc-hyperparameter-tuning-grids" class="nav-link" data-scroll-target="#hyperparameter-tuning-grids"><span class="header-section-number">6.5</span> Hyperparameter Tuning Grids</a></li>
  </ul></li>
  <li><a href="#workflow-and-model-training" id="toc-workflow-and-model-training" class="nav-link" data-scroll-target="#workflow-and-model-training"><span class="header-section-number">7</span> Workflow and Model Training</a>
  <ul class="collapse">
  <li><a href="#decision-tree-workflow" id="toc-decision-tree-workflow" class="nav-link" data-scroll-target="#decision-tree-workflow"><span class="header-section-number">7.1</span> Decision Tree Workflow</a></li>
  <li><a href="#bagged-tree-workflow" id="toc-bagged-tree-workflow" class="nav-link" data-scroll-target="#bagged-tree-workflow"><span class="header-section-number">7.2</span> Bagged Tree Workflow</a></li>
  <li><a href="#random-forest-workflow" id="toc-random-forest-workflow" class="nav-link" data-scroll-target="#random-forest-workflow"><span class="header-section-number">7.3</span> Random Forest Workflow</a></li>
  <li><a href="#boosted-tree-workflow" id="toc-boosted-tree-workflow" class="nav-link" data-scroll-target="#boosted-tree-workflow"><span class="header-section-number">7.4</span> Boosted Tree Workflow</a></li>
  </ul></li>
  <li><a href="#model-fitting-with-cross-validation" id="toc-model-fitting-with-cross-validation" class="nav-link" data-scroll-target="#model-fitting-with-cross-validation"><span class="header-section-number">8</span> Model Fitting with Cross-Validation</a>
  <ul class="collapse">
  <li><a href="#decision-tree-1" id="toc-decision-tree-1" class="nav-link" data-scroll-target="#decision-tree-1"><span class="header-section-number">8.1</span> Decision Tree</a></li>
  <li><a href="#bagged-tree" id="toc-bagged-tree" class="nav-link" data-scroll-target="#bagged-tree"><span class="header-section-number">8.2</span> Bagged Tree</a></li>
  <li><a href="#random-forest-1" id="toc-random-forest-1" class="nav-link" data-scroll-target="#random-forest-1"><span class="header-section-number">8.3</span> Random Forest</a></li>
  </ul></li>
  <li><a href="#boosted-tree" id="toc-boosted-tree" class="nav-link" data-scroll-target="#boosted-tree"><span class="header-section-number">9</span> Boosted Tree</a></li>
  <li><a href="#model-comparison-and-evaluation" id="toc-model-comparison-and-evaluation" class="nav-link" data-scroll-target="#model-comparison-and-evaluation"><span class="header-section-number">10</span> Model Comparison and Evaluation</a></li>
  <li><a href="#selecting-and-finalizing-the-best-model" id="toc-selecting-and-finalizing-the-best-model" class="nav-link" data-scroll-target="#selecting-and-finalizing-the-best-model"><span class="header-section-number">11</span> Selecting and Finalizing the Best Model</a></li>
  <li><a href="#final-model-evaluation" id="toc-final-model-evaluation" class="nav-link" data-scroll-target="#final-model-evaluation"><span class="header-section-number">12</span> Final Model Evaluation</a></li>
  <li><a href="#model-last-fit" id="toc-model-last-fit" class="nav-link" data-scroll-target="#model-last-fit"><span class="header-section-number">13</span> Model Last fit</a></li>
  <li><a href="#confusion-matrix" id="toc-confusion-matrix" class="nav-link" data-scroll-target="#confusion-matrix"><span class="header-section-number">14</span> Confusion matrix</a></li>
  <li><a href="#roc-curve" id="toc-roc-curve" class="nav-link" data-scroll-target="#roc-curve"><span class="header-section-number">15</span> Roc Curve</a></li>
  <li><a href="#feature-importance" id="toc-feature-importance" class="nav-link" data-scroll-target="#feature-importance"><span class="header-section-number">16</span> Feature importance</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">17</span> Conclusion</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Tree_based_models.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="Tree_based_models.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Predicting Loans Using Tree-Based Models</h1>
<p class="subtitle lead">A Comprehensive Approach to Aplly Tree Models</p>
</div>

<div>
  <div class="description">
    Optimizing Decision Making using Cross validation and hyperparameter tuning methods on a loans dataset
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Aouidane Imed Eddine </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 30, 2024</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>This project explores tree based models applied to a loans dataset. The analysis includes various grid search methods to optimize model performance.</p>
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>Decision Trees, Machine Learning, Model Tuning, Loans Dataset, Boosting trees</p>
  </div>
</div>

</header>


<p><img src="tree_image.jpg" class="img-fluid"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(baguette)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="introduction-to-the-loans-dataset" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction to the Loans Dataset</h1>
<p>The dataset provides historical information on loan applicants and their corresponding default status. Here, we’ll load the dataset and present a first look at its structure and variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>loans <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"D:</span><span class="sc">\\</span><span class="st">dataset</span><span class="sc">\\</span><span class="st">loan_df.rds"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(loans,<span class="at">rownames =</span> <span class="cn">FALSE</span>,<span class="at">caption =</span> <span class="st">"Loans Dataset"</span>,<span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3d5260b542b626833ca5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3d5260b542b626833ca5">{"x":{"filter":"none","vertical":false,"caption":"<caption>Loans Dataset<\/caption>","data":[["no","yes","no","no","yes","yes","no","no","no","no","no","yes","no","no","no","no","no","no","yes","no","no","no","no","yes","no","no","yes","no","no","no","no","no","no","no","yes","no","yes","yes","no","no","no","no","yes","no","no","yes","no","no","no","yes","no","yes","no","yes","yes","no","yes","yes","no","yes","no","yes","no","no","no","yes","no","no","yes","yes","no","no","no","yes","yes","yes","no","no","no","no","yes","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","yes","yes","yes","no","no","no","yes","no","no","no","yes","no","no","no","no","no","yes","no","no","no","no","yes","yes","yes","no","no","no","yes","yes","no","yes","no","no","no","no","yes","no","yes","no","yes","no","yes","no","no","no","no","yes","no","yes","no","yes","no","no","no","no","yes","no","no","yes","yes","yes","no","no","no","no","yes","yes","no","yes","yes","no","yes","yes","no","no","yes","no","yes","no","yes","no","no","no","no","no","no","no","no","yes","no","no","no","yes","no","no","no","no","yes","yes","yes","yes","no","yes","no","no","no","yes","no","no","no","no","yes","no","yes","no","yes","no","no","no","no","no","yes","yes","yes","yes","no","no","no","no","no","no","yes","yes","yes","yes","yes","no","yes","yes","yes","yes","yes","no","no","no","yes","no","yes","no","no","yes","no","yes","no","no","yes","no","yes","yes","yes","yes","yes","no","yes","no","yes","yes","no","no","yes","no","yes","yes","no","no","no","yes","no","yes","no","no","yes","no","yes","no","yes","no","no","yes","yes","yes","yes","yes","yes","no","yes","no","no","yes","no","no","no","yes","no","no","yes","no","yes","yes","yes","no","no","yes","no","no","no","no","yes","no","yes","no","no","no","yes","yes","yes","no","no","no","yes","yes","yes","no","yes","yes","no","no","yes","no","no","yes","no","yes","yes","no","yes","yes","yes","no","no","no","no","no","no","yes","yes","no","no","yes","yes","no","no","no","yes","yes","yes","no","yes","no","no","no","no","no","yes","no","yes","no","no","no","yes","no","yes","no","yes","no","no","no","no","no","yes","no","yes","yes","no","no","no","no","no","no","no","no","no","no","no","yes","yes","yes","no","no","yes","no","yes","yes","no","no","no","no","yes","no","yes","no","no","yes","no","no","no","no","no","no","no","yes","yes","no","no","no","yes","no","yes","yes","yes","no","yes","yes","no","yes","yes","yes","no","no","yes","yes","no","no","no","yes","no","no","no","yes","no","no","no","yes","yes","yes","no","yes","yes","no","yes","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","yes","no","no","yes","yes","yes","no","no","yes","no","no","yes","yes","yes","no","no","yes","no","yes","yes","no","no","no","yes","no","yes","yes","no","no","yes","no","no","no","yes","no","yes","yes","yes","no","no","yes","no","yes","yes","no","no","yes","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","yes","no","yes","yes","yes","no","no","no","yes","no","no","no","no","yes","no","yes","yes","yes","no","yes","yes","no","no","yes","yes","no","yes","yes","yes","no","yes","yes","no","no","no","no","no","no","no","no","no","no","yes","no","yes","yes","no","yes","yes","yes","no","no","yes","yes","yes","no","yes","no","yes","yes","no","yes","no","yes","no","no","no","yes","no","yes","yes","no","no","no","yes","no","no","yes","no","yes","no","no","no","yes","no","yes","yes","no","yes","no","no","no","yes","no","yes","yes","yes","no","no","no","yes","no","no","no","no","no","yes","no","no","yes","no","no","no","yes","no","no","no","no","no","no","no","yes","no","yes","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","yes","no","no","no","yes","yes","no","yes","yes","no","no","no","yes","no","no","no","no","yes","yes","no","yes","yes","yes","yes","yes","no","yes","no","no","yes","yes","yes","no","no","no","no","yes","no","no","no","no","yes","no","no","no","no","no","no","yes","yes","no","no","no","no","yes","no","yes","no","no","yes","yes","no","yes","no","no","yes","yes","yes","yes","no","no","no","no","no","yes","no","yes","yes","yes","yes","no","no","no","no","yes","no","no","yes","yes","no","no","no","no","no","no","yes","no","yes","no","no","no","no","yes","no","no","yes","yes","no","yes","no","yes","no","yes","no","no","no","yes","yes","yes","no","no","no","yes","yes","no","no","no","no","no","no","no","no","no","yes","yes","yes","no","no","no","no","yes","no","no","no","no","no","yes","no","yes","no","yes","no","yes","yes","no","yes","no","no","no","no","yes","no","no","yes","yes","no","no","yes","no","no","yes","yes","no","yes","no","yes","yes","no","no","yes","no","yes","yes","yes","yes"],["debt_consolidation","medical","small_business","small_business","small_business","medical","debt_consolidation","debt_consolidation","debt_consolidation","small_business","home_improvement","medical","credit_card","debt_consolidation","debt_consolidation","medical","small_business","home_improvement","medical","small_business","small_business","debt_consolidation","home_improvement","medical","medical","debt_consolidation","small_business","debt_consolidation","credit_card","medical","small_business","credit_card","medical","home_improvement","credit_card","credit_card","credit_card","medical","home_improvement","debt_consolidation","debt_consolidation","small_business","credit_card","debt_consolidation","home_improvement","debt_consolidation","debt_consolidation","debt_consolidation","small_business","credit_card","debt_consolidation","credit_card","debt_consolidation","medical","home_improvement","debt_consolidation","small_business","medical","medical","medical","medical","debt_consolidation","debt_consolidation","small_business","debt_consolidation","small_business","debt_consolidation","home_improvement","credit_card","small_business","medical","debt_consolidation","medical","credit_card","small_business","debt_consolidation","debt_consolidation","credit_card","credit_card","small_business","small_business","home_improvement","debt_consolidation","debt_consolidation","debt_consolidation","credit_card","debt_consolidation","small_business","home_improvement","debt_consolidation","small_business","home_improvement","debt_consolidation","small_business","debt_consolidation","medical","small_business","small_business","debt_consolidation","medical","medical","credit_card","credit_card","home_improvement","small_business","medical","credit_card","debt_consolidation","debt_consolidation","home_improvement","small_business","small_business","credit_card","debt_consolidation","debt_consolidation","small_business","debt_consolidation","medical","credit_card","credit_card","credit_card","credit_card","credit_card","small_business","small_business","debt_consolidation","debt_consolidation","debt_consolidation","debt_consolidation","debt_consolidation","small_business","medical","credit_card","small_business","medical","home_improvement","credit_card","debt_consolidation","debt_consolidation","home_improvement","debt_consolidation","medical","medical","debt_consolidation","debt_consolidation","credit_card","debt_consolidation","debt_consolidation","home_improvement","debt_consolidation","debt_consolidation","credit_card","home_improvement","home_improvement","medical","medical","small_business","debt_consolidation","medical","debt_consolidation","credit_card","credit_card","small_business","debt_consolidation","credit_card","home_improvement","medical","medical","medical","medical","small_business","credit_card","credit_card","credit_card","medical","small_business","medical","small_business","credit_card","small_business","debt_consolidation","small_business","credit_card","debt_consolidation","small_business","home_improvement","small_business","debt_consolidation","debt_consolidation","debt_consolidation","debt_consolidation","small_business","medical","medical","credit_card","credit_card","small_business","medical","small_business","debt_consolidation","credit_card","credit_card","medical","credit_card","home_improvement","small_business","small_business","small_business","credit_card","debt_consolidation","medical","debt_consolidation","small_business","small_business","home_improvement","debt_consolidation","small_business","credit_card","credit_card","credit_card","debt_consolidation","debt_consolidation","small_business","credit_card","medical","debt_consolidation","debt_consolidation","medical","credit_card","credit_card","debt_consolidation","home_improvement","credit_card","small_business","small_business","credit_card","credit_card","debt_consolidation","home_improvement","credit_card","debt_consolidation","small_business","small_business","debt_consolidation","credit_card","small_business","small_business","credit_card","debt_consolidation","debt_consolidation","small_business","small_business","debt_consolidation","medical","medical","credit_card","credit_card","debt_consolidation","medical","small_business","credit_card","credit_card","credit_card","debt_consolidation","small_business","debt_consolidation","debt_consolidation","credit_card","home_improvement","credit_card","medical","medical","small_business","credit_card","debt_consolidation","small_business","small_business","debt_consolidation","home_improvement","small_business","medical","small_business","debt_consolidation","medical","medical","credit_card","credit_card","credit_card","debt_consolidation","debt_consolidation","small_business","small_business","small_business","credit_card","credit_card","medical","debt_consolidation","small_business","small_business","home_improvement","medical","small_business","medical","medical","credit_card","small_business","debt_consolidation","medical","small_business","debt_consolidation","small_business","debt_consolidation","debt_consolidation","credit_card","small_business","home_improvement","small_business","medical","medical","medical","credit_card","small_business","medical","small_business","medical","small_business","small_business","small_business","home_improvement","medical","small_business","small_business","small_business","home_improvement","home_improvement","debt_consolidation","credit_card","medical","small_business","debt_consolidation","small_business","credit_card","medical","medical","debt_consolidation","small_business","credit_card","small_business","credit_card","medical","debt_consolidation","medical","debt_consolidation","credit_card","small_business","small_business","credit_card","medical","credit_card","medical","debt_consolidation","debt_consolidation","debt_consolidation","small_business","small_business","small_business","credit_card","credit_card","medical","debt_consolidation","credit_card","small_business","small_business","medical","small_business","debt_consolidation","medical","credit_card","medical","debt_consolidation","credit_card","medical","debt_consolidation","debt_consolidation","medical","home_improvement","debt_consolidation","credit_card","credit_card","small_business","credit_card","credit_card","home_improvement","debt_consolidation","debt_consolidation","medical","debt_consolidation","home_improvement","medical","medical","medical","credit_card","debt_consolidation","small_business","credit_card","debt_consolidation","home_improvement","debt_consolidation","debt_consolidation","credit_card","home_improvement","debt_consolidation","medical","debt_consolidation","credit_card","debt_consolidation","medical","home_improvement","debt_consolidation","debt_consolidation","credit_card","small_business","credit_card","small_business","home_improvement","small_business","small_business","debt_consolidation","small_business","debt_consolidation","debt_consolidation","small_business","debt_consolidation","debt_consolidation","credit_card","debt_consolidation","credit_card","credit_card","medical","credit_card","credit_card","medical","debt_consolidation","small_business","debt_consolidation","small_business","credit_card","small_business","debt_consolidation","small_business","debt_consolidation","debt_consolidation","debt_consolidation","credit_card","small_business","home_improvement","home_improvement","credit_card","home_improvement","medical","small_business","credit_card","small_business","small_business","debt_consolidation","debt_consolidation","small_business","credit_card","credit_card","home_improvement","debt_consolidation","debt_consolidation","debt_consolidation","medical","credit_card","debt_consolidation","credit_card","debt_consolidation","small_business","home_improvement","credit_card","home_improvement","debt_consolidation","medical","credit_card","debt_consolidation","small_business","debt_consolidation","credit_card","debt_consolidation","home_improvement","debt_consolidation","credit_card","medical","home_improvement","home_improvement","credit_card","debt_consolidation","debt_consolidation","debt_consolidation","home_improvement","debt_consolidation","debt_consolidation","medical","debt_consolidation","debt_consolidation","credit_card","small_business","small_business","debt_consolidation","small_business","debt_consolidation","credit_card","debt_consolidation","credit_card","credit_card","medical","credit_card","debt_consolidation","debt_consolidation","medical","debt_consolidation","small_business","small_business","home_improvement","medical","credit_card","credit_card","small_business","small_business","medical","debt_consolidation","debt_consolidation","credit_card","home_improvement","home_improvement","credit_card","debt_consolidation","medical","small_business","small_business","home_improvement","home_improvement","medical","small_business","home_improvement","debt_consolidation","credit_card","home_improvement","credit_card","credit_card","small_business","medical","debt_consolidation","small_business","small_business","medical","small_business","small_business","home_improvement","debt_consolidation","debt_consolidation","medical","small_business","credit_card","medical","credit_card","credit_card","credit_card","medical","credit_card","credit_card","small_business","medical","credit_card","medical","debt_consolidation","debt_consolidation","home_improvement","home_improvement","home_improvement","debt_consolidation","medical","debt_consolidation","home_improvement","medical","home_improvement","credit_card","credit_card","credit_card","debt_consolidation","home_improvement","home_improvement","credit_card","credit_card","small_business","home_improvement","small_business","small_business","credit_card","debt_consolidation","small_business","credit_card","medical","small_business","home_improvement","small_business","small_business","small_business","small_business","debt_consolidation","debt_consolidation","small_business","debt_consolidation","medical","medical","credit_card","small_business","debt_consolidation","credit_card","small_business","small_business","medical","small_business","credit_card","medical","small_business","medical","small_business","medical","credit_card","debt_consolidation","small_business","debt_consolidation","small_business","credit_card","debt_consolidation","debt_consolidation","debt_consolidation","debt_consolidation","credit_card","small_business","home_improvement","home_improvement","debt_consolidation","debt_consolidation","small_business","home_improvement","small_business","small_business","debt_consolidation","credit_card","small_business","home_improvement","credit_card","small_business","credit_card","credit_card","credit_card","small_business","credit_card","credit_card","debt_consolidation","credit_card","small_business","debt_consolidation","credit_card","small_business","debt_consolidation","home_improvement","credit_card","debt_consolidation","small_business","debt_consolidation","medical","debt_consolidation","debt_consolidation","small_business","medical","debt_consolidation","debt_consolidation","small_business","debt_consolidation","debt_consolidation","debt_consolidation","medical","debt_consolidation","credit_card","small_business","home_improvement","debt_consolidation","credit_card","credit_card","home_improvement","credit_card","medical","debt_consolidation","debt_consolidation","home_improvement","home_improvement","credit_card","debt_consolidation","home_improvement","debt_consolidation","small_business","credit_card","debt_consolidation","home_improvement","credit_card","home_improvement","credit_card","medical","credit_card","home_improvement","debt_consolidation","debt_consolidation","small_business","medical","credit_card","home_improvement","debt_consolidation","small_business","small_business","credit_card","small_business","credit_card","credit_card","credit_card","small_business","small_business","debt_consolidation","medical","small_business","small_business","small_business","small_business","small_business","small_business","debt_consolidation","small_business","small_business","small_business","debt_consolidation","credit_card","medical","debt_consolidation","medical","home_improvement","home_improvement","credit_card","small_business","small_business","medical","credit_card","credit_card","small_business","debt_consolidation","debt_consolidation","credit_card","credit_card","medical","credit_card","small_business","medical","home_improvement","home_improvement","debt_consolidation","home_improvement","credit_card","small_business","debt_consolidation","credit_card","debt_consolidation","credit_card","debt_consolidation","medical","medical","debt_consolidation","debt_consolidation","medical","credit_card","home_improvement","home_improvement","home_improvement","home_improvement","home_improvement","debt_consolidation","small_business","small_business","home_improvement","home_improvement","debt_consolidation","medical","debt_consolidation","credit_card","medical","small_business","debt_consolidation","debt_consolidation","medical","medical","debt_consolidation","credit_card","medical","small_business","small_business","small_business","credit_card","medical","small_business","credit_card","debt_consolidation","small_business","debt_consolidation","credit_card","small_business","medical","medical","small_business","small_business","debt_consolidation","medical","medical","debt_consolidation","small_business","debt_consolidation","debt_consolidation","medical","home_improvement","debt_consolidation","medical","credit_card","debt_consolidation","credit_card","debt_consolidation","medical","medical","debt_consolidation","credit_card","medical","medical","home_improvement","credit_card","credit_card","small_business","medical","debt_consolidation","medical","small_business","debt_consolidation","home_improvement","credit_card","debt_consolidation","small_business","credit_card","debt_consolidation","credit_card","medical","debt_consolidation","debt_consolidation","home_improvement","home_improvement","credit_card","debt_consolidation","home_improvement","home_improvement","debt_consolidation","small_business","credit_card","home_improvement","medical","small_business"],["no","no","no","no","yes","no","no","no","yes","no","no","no","yes","no","no","no","no","no","no","no","yes","yes","yes","no","no","yes","yes","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","yes","no","no","no","no","no","yes","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","yes","yes","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","yes","no","no","no","no","no","yes","yes","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","yes","no","no","no","no","yes","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","yes","yes","no","no","no","no","yes","no","no","no","no","no","no","yes","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","yes","no","yes","no","no","no","no","yes","no","yes","no","no","yes","no","no","no","yes","yes","no","no","no","no","no","yes","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","yes","no","no","yes","no","no","no","yes","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","yes","no","no","no","no","no","no","no","no","yes","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","yes","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","yes","no","no","no","no","no","no","yes","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","yes","no","no","no","no","yes","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","yes","no","yes","no","no","no","no","yes","no","no","no","yes","no","no","no","no","yes","no","yes","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","yes","no","no","yes","yes","no","no","no","no","no","no","no","yes","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","yes","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no"],[25000,10000,13000,36000,12000,13000,10000,40000,16000,12000,5000,19000,10000,22000,4000,12000,12000,5000,24000,15000,16000,10000,35000,10000,10000,19200,24000,10000,12000,11700,12000,2000,5000,18000,5000,24000,27000,25000,12500,7200,4500,4000,13200,11000,16000,8000,24500,33600,25000,28000,2050,15700,6400,25000,30000,10000,30000,20000,15000,8400,29975,15000,7500,3000,20000,30000,19500,7300,30000,10000,25000,10000,2500,10000,3025,1000,6300,25000,10000,25000,20000,28000,40000,30000,6000,28000,9500,20000,5000,2000,15000,40000,18000,15000,16000,33900,32000,20850,5000,12000,10000,36000,12000,40000,25000,10000,4200,20000,24000,9500,2400,16000,5000,24000,5600,30000,16000,16000,30000,10000,7200,31100,12000,30000,9000,12000,16800,9000,36000,40000,15000,15000,3000,34450,10000,30000,2500,26000,12000,6000,9000,28000,35000,30000,2500,32000,20000,5000,3000,40000,40000,8000,4000,21700,20000,5000,9000,10000,16000,20000,30000,38000,6000,10000,20000,32000,35000,7000,40000,3100,21000,28000,7000,24725,13425,10000,26000,2000,12000,4800,35000,36000,8000,11200,18000,8000,16500,12000,40000,35000,24000,4000,16000,30150,11450,12000,25000,35000,8300,6000,25000,20975,3000,35000,11200,10000,12000,4800,10000,21000,4800,10000,20000,24000,24000,1800,24000,11500,14000,26600,16500,5000,18000,4500,9600,8000,14000,12000,28000,28000,24000,24000,20000,6500,10500,10000,20000,22000,10000,20000,33750,10000,5300,25000,19200,17100,15000,30000,20000,13000,36250,11000,8000,25000,3500,10000,18000,4000,28000,8500,20000,35000,20000,30000,35000,28000,16000,12000,12000,4500,5500,25000,12000,11500,40000,12000,22000,5000,10000,24500,21000,23000,8000,4700,5000,23000,13200,1000,25000,6000,20000,6500,12500,10000,10000,6000,21600,21000,13000,10000,30000,24000,30000,19200,20000,40000,20000,16825,5600,38400,10000,5000,3000,25000,15000,20000,16000,7500,24000,30000,35000,12500,5000,4200,18000,19450,15000,7000,3000,10000,2000,15000,17000,25000,16000,24000,11500,20000,35000,29175,28000,20000,10000,14400,28000,15000,7000,18000,10000,30000,15000,35000,6000,12800,10000,6500,17000,10000,20000,13000,20000,20000,23875,32000,20000,16800,5075,27200,3000,14000,1500,15000,10000,40000,18000,28000,28000,4300,10800,12000,6000,10000,6000,14400,35500,40000,7500,19000,8000,20000,6500,25000,10000,25000,38400,32000,40000,40000,14400,24100,35000,27250,35000,8650,20000,12000,35000,10000,40000,12000,30000,30000,35000,40000,11200,5000,4000,3500,2000,16000,8000,40000,35000,40000,7800,20000,10000,15000,16000,3000,15200,4000,16000,4075,5000,12000,30000,15000,32000,10000,10000,16000,10000,12000,30000,8000,25000,20000,40000,35000,4500,21000,25000,15000,15600,3500,18000,28000,30000,13500,25000,35000,15000,3000,32000,10000,11200,18000,6000,25000,3500,16000,25050,10000,13000,14000,4000,21000,24400,30000,10000,30000,30000,30000,21250,20000,15000,4800,8000,22000,20000,30000,35000,35500,12000,21000,24000,12000,20000,15000,20000,40000,5600,15000,4800,24000,40000,34200,40000,35000,10000,10000,10000,20000,20000,10000,15000,5175,36000,14000,25000,7000,6000,1000,10000,24000,16000,15500,20000,24000,4000,10000,5000,7000,15000,12000,37000,10000,34950,4925,24000,13000,13000,25000,16000,15000,10000,10000,32000,35000,10400,20000,6000,6800,30000,7000,10000,8000,30000,21125,20000,30000,15000,6025,10200,25000,16000,15000,20325,20600,3000,30000,8500,5550,5000,15000,30000,40000,10000,40000,30000,25000,18000,6000,20000,6000,1500,24000,10000,35000,7000,36000,17000,16000,4500,7000,2000,30000,22000,17000,15000,8000,13000,30000,10000,10000,25600,6000,12000,38400,10000,17000,3000,20000,32000,28000,21975,30000,6500,10000,6000,6300,15000,20000,5200,8500,8000,12000,10000,20000,22000,3200,7800,23625,12000,10000,16000,20000,4000,7000,17000,4800,22000,29000,12000,35000,23100,16000,20000,4000,10000,19000,7500,2000,15000,30000,2000,14000,30000,14400,16000,12000,24000,9000,11000,24000,7000,10000,35000,20000,20000,15200,6000,12000,10000,30750,20000,7000,20000,15000,16800,25000,14400,12800,17000,20000,25000,18000,18000,30000,15400,35000,20000,12000,30000,25000,8500,5000,10000,25000,14000,11000,19000,6000,16000,9000,8500,39725,2500,30000,8000,23000,12000,35000,24725,16000,6000,35000,8000,35000,12500,8000,40000,30000,16000,15000,20000,14000,2100,2100,1800,12000,21000,8500,35000,10000,1200,6000,11000,22000,32000,19000,16000,12000,10000,30000,1600,10000,8000,15000,25000,24000,14500,17600,20000,35000,28000,20000,19000,5000,38000,28200,15000,30000,16500,24000,25000,25000,25000,30000,10000,15000,4000,22000,5000,30000,15000,40000,20000,2500,18000,8000,10000,25000,22000,6500,40000,13425,16000,20000,23000,36000,10000,32000,10000,4000,36000,30000,12000,5000,10000,5000,18000,35000,10000,35000,5000,26000,16000,21000,12000,25000,12175,30000,40000,15000,18000,35000,9600,2600,25000,2400,30000,15000,23650,15000,7000,40000,28800,13000,20000,25000,16000,15000,20000,10000,5000,7000,13500,7200,40000,13000,18000,15000,5000,21600,35000,12000,4800,40000,1000,35000,28125,40000,16000,4500,32000,14000,25000,8400,16000,5000,16000,15700,25000,21000,16000,16000,25000,6000,10000,11200],[5.47,10.25,6.22,5.97,11.75,13.25,10.47,7.97,4.72,7.47,9.969999999999999,11,16.5,16,13,7.97,15.5,11.72,18.75,5.97,8.719999999999999,6.72,11.97,11.5,7.22,9.719999999999999,11.5,6.97,8.469999999999999,8.219999999999999,10.97,9.469999999999999,7.22,5.47,15.25,5.97,13.75,14.5,16,9.219999999999999,6.72,8.219999999999999,16.75,7.72,5.72,11.5,6.72,11.47,8.719999999999999,12.25,6.97,12.75,5.72,16,12.5,10.22,16.25,15.5,10.47,19.25,10.47,10.75,9.719999999999999,17,7.22,9,9.469999999999999,6.47,18.5,8.25,9.969999999999999,8.719999999999999,8.469999999999999,19.5,16.75,19.25,11.72,10.72,9.719999999999999,6.22,7.25,8.219999999999999,6.97,5.72,7.47,9.719999999999999,6.72,10.97,8.25,11.97,7.97,11.22,11.22,7.72,8.219999999999999,9.5,16.5,17.5,19,9.719999999999999,7.47,17.25,10.22,11.72,8.969999999999999,8.25,10.97,9.469999999999999,6.97,11.47,14.5,6.75,19,7.97,15.5,7.72,8.25,14.5,16.75,10.22,9.469999999999999,10.97,19.25,18.75,5.72,9,18.5,6.97,8.219999999999999,10.97,8.75,7.22,19.25,11.97,15.5,6.22,16.75,7.22,7.47,20,5.22,13.75,9.969999999999999,16.25,10.22,6.75,7.22,8.219999999999999,19.5,9.469999999999999,8.5,6.72,6.97,11.25,19.25,15.25,6.72,8.719999999999999,6.22,6.72,10.25,16.5,4.72,13,14.75,4.72,14,13,16.5,4.97,11.75,5.47,9.5,7.72,12,5.97,9.969999999999999,4.72,18.5,6.97,11.22,9.219999999999999,5.72,15,6.22,5.72,7.72,13.25,10.22,9.969999999999999,8.969999999999999,5.97,10.75,14.25,15.5,11.25,9.969999999999999,9,11.47,10.97,7.47,11.5,8.219999999999999,10.72,9.969999999999999,8.719999999999999,13.75,11.22,19.25,9.969999999999999,18.5,10.22,6.72,7.97,6.47,18,19,13,19.25,11.5,4.72,6.47,4.97,8.469999999999999,6.22,5.22,15.75,12,18,20,10.75,11.22,15,14.25,8,7.75,12,10.22,12.5,18,13.5,8.219999999999999,14.75,6.97,5.22,13.75,7.22,14.75,10.47,4.72,14.5,7.22,15.25,17.5,16.5,19.25,15,7.22,18.25,7.72,9.75,14,7.47,8.219999999999999,13.5,6.97,7,14,9.719999999999999,10.47,10.72,15,6.97,16,8.219999999999999,11.22,13,9.719999999999999,19.75,15,18.75,10.97,10.72,14.25,12.5,7,18.25,15.5,6.75,8.719999999999999,18.75,16,7.22,8.75,8.719999999999999,9.969999999999999,4.97,17.25,10.97,8.469999999999999,7.75,9.969999999999999,13,15.25,10,8.469999999999999,9.469999999999999,10.5,5.72,8.219999999999999,8.469999999999999,5.47,17.75,12,8,9.469999999999999,5.97,14.5,18.75,11,15.5,8.219999999999999,11.22,6.97,8.5,14.5,16,11.47,11,11.75,9.469999999999999,5.72,20,10.97,9.719999999999999,13,5.97,15.25,9,10.97,13,12,18,9.969999999999999,8.469999999999999,6.22,11.22,17.5,7.47,17,11.25,8.969999999999999,5.97,12.75,17,8.719999999999999,9.219999999999999,7.72,13.5,9.25,18.75,6.72,15.5,10.97,9.969999999999999,11.47,6.47,10.97,12.25,5.97,12.75,9.219999999999999,9.469999999999999,11.22,8.75,7.72,8,6.97,7.25,9.219999999999999,5.72,7.47,4.72,9.469999999999999,16,7.97,14.25,15.25,10.97,5.97,8.719999999999999,9.719999999999999,5.72,5.72,6.97,7.22,6.97,6.72,10.47,14.75,14.25,13.75,11.72,8.719999999999999,9,10.22,8,16.75,8.719999999999999,11.22,12.5,7.22,12.75,11.97,13,5.47,5.72,10.75,5.47,5.97,8.469999999999999,9.469999999999999,11.72,5.72,14.5,14,16.5,5.47,6.97,10.22,12.5,7.47,7,16.25,9.75,8.719999999999999,15.25,12.75,5.72,15.5,17.5,14,5.47,10.72,9.5,16.5,9.469999999999999,11.97,5.22,19.75,11.22,11.97,5.22,10.75,6.22,6.97,8.469999999999999,13.75,17.25,18.5,10.47,16,18.75,9.469999999999999,16.75,9.469999999999999,9.719999999999999,7.22,11.22,5.47,7.72,8.5,5.22,7.72,11.97,9.469999999999999,11.72,7.97,11.22,10.97,17,7.97,7.47,7,8.5,8.5,8.469999999999999,10.47,9.5,7.97,9.969999999999999,16.25,8,10.25,8.219999999999999,8.719999999999999,9.25,11.47,16.25,15,9.469999999999999,5.22,10.72,17.5,14.5,16.25,13.5,10.47,11.47,13.25,5.22,10.72,11.22,15.5,8.469999999999999,11.25,10.25,13,5.22,10.22,11.75,6.22,17.75,18.75,11.22,11.97,10.75,5.97,6.72,7.47,6.47,12.5,8.719999999999999,5.47,13,6.22,19,9.219999999999999,6.97,5.72,5.72,8.969999999999999,5.47,7.97,8.719999999999999,17.75,8.219999999999999,12,15.25,14.25,7.22,7.22,10.97,11,5.47,6.97,7.22,9.469999999999999,12.5,7.22,7.25,12,15.75,14.5,10.5,7.25,7.97,8.219999999999999,11.5,9.75,10.47,7.5,9.75,14.5,4.97,13.5,13.75,10.47,9.219999999999999,11.22,11.72,7.97,10.72,4.97,5.72,10.97,6.47,14.25,9.719999999999999,18.5,13.75,5.72,19,13.75,19.75,10.22,7.47,15.75,10.5,11,10.47,12.5,10.72,7.5,15.5,5.72,11.5,10.22,18.5,7.22,7.97,11.47,13.5,6.72,19,13.5,11.72,8.219999999999999,4.97,8,9.469999999999999,6.22,7.75,7.47,18.25,4.97,9.219999999999999,4.72,15.75,11.97,7,10.75,6.47,11.25,10.97,11.72,6.97,18.25,7.22,17.5,11,16.75,7.47,13,6.22,7.25,6.72,4.97,9.469999999999999,4.97,19.5,7,15,9.719999999999999,13,7.22,9.969999999999999,16,18,10.47,6.22,8.969999999999999,7.47,6.97,8.469999999999999,11.22,9.75,11.97,11.75,16,4.72,7.5,7.72,10.97,9.469999999999999,8.969999999999999,10.47,4.97,8.969999999999999,13.5,5.47,8.469999999999999,17,11.47,20,8.75,5.97,14.75,7.97,8.219999999999999,11.72,10.75,12.25,10.72,16,16.75,11.22,11.97,5.47,7.25,12.5,11.97,15,4.97,17.75,7.75,9.969999999999999,8.75,16.25,14.25,19.75,14,8.469999999999999,9.75,11.72,9.719999999999999,17.25,7.25,7.75,7.22,12,7.22,10.72,7.75,8.219999999999999,6.72,11.72,8.969999999999999,15,10.22,6.72,10.47,17,5.72,5.22,9.25,19.25,19.5,4.72,10.47,11.97,8,6.47,9.75,6.47,11.22,19.25,12.25,12.5,20,10.97,6.97,12.25,12.5,11.5,18.75,10.97,18.5,6.47,7.22,5.22,13.75,11.97,11.25,12.75,11.25,11,7.47,10.47,11.72,6.97,8.75,19,11.72,8.75,9,10.47,5.47,6.22,6.22,10.47,8.969999999999999,10.25,7.47,13,9.969999999999999,9.719999999999999,11.47,9.469999999999999,12.5,11.47,11.97,17,7.5,8.719999999999999,14.25,17.5,14.25,9.219999999999999,16,5.72,10.47,8.219999999999999,12.25,18.25,19.25,6.97,6.22,8.969999999999999,18,7.5,6.97,7.97,6.22,11.72,7.97,5.97,8.719999999999999,14.5,18.5,14.5,17.75,19.5,7.47,8.719999999999999,5.47,7.72,17.5,9.469999999999999,4.72,11.72,14,8.219999999999999,19.25,4.72,17,7.97,13,9.219999999999999,11.25,7,7.97,14,5.47,6.22,4.72,7.22,7.25,9.719999999999999,11.72,15.75,15.75,11.72,5.22,15,16,6.22,7.5,8.25,6.97,9.75,18,13.5,12.5,12.5,10.97,14.25,7.47,8,19.75,16.25,19.5],[855.42,363.79,441.73,1152.01,307.67,333.31,342.12,972.9400000000001,519.4400000000001,375.88,156.62,523.15,335.12,719.22,129.86,398.46,239.61,156.62,729.5599999999999,451.73,481.77,346.9,1120.18,259.58,351.67,643.33,702.33,339.79,365.45,260.21,384.06,64.93000000000001,161.15,553.41,189.54,730.89,774.86,640.98,384.37,235.42,144.01,122.98,493.19,368.63,481.84,293.37,821.03,774.6900000000001,563.98,999.54,64.20999999999999,504.97,198.64,818.85,1070.93,324.61,1070.93,546.15,513.25,312.18,1039.83,400.68,228.41,104.07,424.26,1114.91,676.36,222.35,794.8200000000001,373.63,761.46,212.08,81.17,368.69,109.46,38.67,195.54,805.75,310.33,555.99,498.02,843.09,902.16,903.45,201.04,869.05,286.1,620.75,180.92,67.95,483.52,922.05,588.54,345.77,496.6,887.24,820.45,552.4,175.81,410.6,339.74,1345.06,392.36,1241.5,811.51,379.07,137.33,670.23,804.27,286.1,79.70999999999999,401.7,155.17,553.35,170.55,930.99,505.15,450.23,753.1799999999999,313.23,239.11,659.5599999999999,351.17,747.03,271,454.88,526.22,279.3,1152.18,1218.15,579.87,325.39,109.14,1170.58,286.99,930.99,92.18000000000001,883.45,407.69,208.14,288.01,702.97,1189.26,1114.91,83.78,796.84,640.01,169.9,99.63,952.65,1092.29,245.96,138.76,785.17,519.15,180.92,281.87,320.05,487.34,693.8,1106.07,1401.02,203.85,396.81,546.15,745.92,927.29,254.65,798.67,103.87,749.65,593.96,265.35,753.08,511.67,243.24,578.1,62.64,276.68,154.73,815.66,763.66,268.09,299.17,553.41,257.88,502.49,317.93,902.37,1230.85,804.27,120.45,427.39,1219.59,375.04,327.69,582.62,1256.05,269.42,184.5,768.74,758.9299999999999,101.94,1096.13,363.56,342.17,358.01,146.2,254.27,686.52,171.35,326.97,653.9299999999999,796.92,773.63,58.44,896.71,294.85,373.96,710.53,496.82,150.56,542.0700000000001,140.96,321.71,250.55,370.92,327.69,747.92,1040.59,757.72,509.11,519.15,232.04,280.47,273.08,498.02,669.99,301.15,679.58,1260.99,304.54,194.36,867.25,427,490.75,461.18,877.73,476.33,403.49,1336.5,267.62,294.95,717.46,128.35,368.69,660.09,121.84,697.23,284.81,723.66,878.71,609.17,676.78,908.5,587.1,418.76,298.82,257.46,156.11,177.27,752.96,392.36,316.64,889.58,384.01,547.83,162.33,361.83,519.71,849.47,518.75,250.55,172.36,193.29,628.0700000000001,378.82,36.19,789.3,194.79,529.88,203.57,387.97,391.65,335.12,199.26,525.5,545.1,293.27,339.74,895.02,744.9,1114.91,498.38,502.12,798.67,451.19,612.0700000000001,179.21,854,212.13,160.03,111.5,837.67,384.59,703.34,339.41,260.18,868.39,1085.48,871.54,384.37,155.17,137.31,495.61,737.29,455.98,219.23,109.14,254.27,64.47,325.47,435.87,536.36,536.11,597.63,353.62,546.15,984.66,709.79,1026.8,550.6799999999999,273.08,433.59,631.51,509.69,215.25,377.51,346.85,778.72,492.61,1189.26,192.03,385.52,366.72,225.49,323.31,222.35,585.27,466.54,803.9,602.3,607.05,1024.01,461.03,408.73,152.84,613.61,108.55,421.55,53.84,490.45,304.59,1406.48,663.64,957.9299999999999,999.54,138.61,409.4,365.45,182.73,346.9,186.2,442.79,1345.69,798.67,267.74,493.19,243.67,609.17,212.53,555.99,351.62,805.86,766.73,1046.28,1204.42,1229.97,446.88,789.37,955.75,713.2,1136.11,295.98,512.78,375.82,1370.95,249.01,1298.59,375.88,1054.86,636.24,1043.99,922.05,287.16,166.05,140.67,130.08,67.95999999999999,501.09,240.92,838.71,815.85,848.51,266.86,596.5700000000001,358.88,318.12,523.0700000000001,105.51,564.89,128.02,477.35,151.45,179.44,392.36,894.85,553.04,1087.33,259.58,249.01,514.62,326.97,392.3,1106.07,297.31,761.46,609.08,922.05,889.92,140.96,681.76,830.24,397.41,506.45,118.91,563.8099999999999,843.3200000000001,778.72,343.26,536.36,1266.39,389.36,101.94,1237.22,351.67,350.82,584.37,193.38,811.51,113.62,477.35,596.47,301.15,435.59,438.46,122.98,697.41,562.58,629.04,264.94,643.63,1040.7,1100.14,773.05,519.15,465.57,164.22,291.03,662.53,620.66,753.1799999999999,934.9,1165.84,372.45,445.37,655.38,398.52,498.02,542.74,653.9299999999999,848.3099999999999,168.62,389.36,156.95,909.76,1566.59,741.89,798.49,1388.82,335.12,313.18,346.85,758.14,684.24,368.69,568.6,188.26,875.65,296.98,934.0700000000001,210.78,214.19,36.38,351.62,751.75,423.91,332.55,399.34,737.88,129.85,351.62,173.45,215.22,409.61,270.71,1239.92,307.45,1064.52,167.33,533.75,421.99,403.49,530.2,491.99,389.36,233.1,251.06,1142.33,871.54,319.8,602.21,196.18,246.05,676.78,239.52,335.07,268.09,778.72,717.71,502.12,778.72,595.21,195.58,259.35,921.72,487.26,486.98,735.41,676.52,100.54,903.55,313.39,210.39,160.03,538.3099999999999,794.8200000000001,952.4400000000001,351.67,889.38,996.29,563.85,615.8099999999999,199.23,664.1,192.01,48.7,884.85,320.05,878.71,254.65,800.4400000000001,644.42,406.82,160.64,210.81,64.01000000000001,911.95,547.83,618.4400000000001,294.97,309.31,293.27,894.85,366.72,335.12,699.0700000000001,184.5,307.67,1191.84,214.55,577.65,107.67,644.6,873.83,741.83,688.22,667.1900000000001,225.49,379.07,180.69,201.64,451.78,693.7,189.17,290.8,273.74,421.95,261.73,614.99,817.6,116.42,239.81,895.55,361.38,304.54,389.18,498.02,125.3,274.19,423.32,179.35,512.71,615.17,389.53,897.37,739.3200000000001,536.11,614.99,121.82,335.12,507.52,225.87,68.43000000000001,542.74,691.54,60.92,464.94,1143.39,451.05,389.18,260.32,520.75,307.91,335,571.47,274.16,320.05,927.29,433.86,649.21,603.15,182.75,386.76,339.79,984.16,640.1,237.86,620.66,498.08,387.35,849.35,464.11,385.47,511.88,519.15,800.13,448.22,419.58,629.04,347.41,1266.39,762.26,369,895.02,821.01,298.92,155.19,301.11,622.53,322.79,354.53,608.01,182.75,418.76,343.02,288.83,1018.51,90.45999999999999,1114.91,297.31,584.8,375.82,871.54,518.4299999999999,523.0700000000001,220.03,889.92,293.37,750.91,387.97,281.34,1204.42,769.17,368.9,465.57,433.96,279.54,77.01000000000001,67.22,58.85,361.33,645.64,294.87,1172.9,275.34,47.62,199.26,335.05,662.53,1031.5,724.15,372.88,311.49,335.12,1005.34,58.68,259.58,271.84,422.09,761.35,768.12,440.78,514.9400000000001,529.88,955.75,951.41,466.2,584.24,152.27,758.5599999999999,849.34,486.98,1100.14,608.34,615.34,947.67,775.8200000000001,800.13,973.8099999999999,310.38,397.41,135.92,496.19,180.92,1070.93,325.39,858.1799999999999,679.58,76.88,588.54,256.04,267.12,837.67,559.38,212.53,1298.59,291.23,339.41,585.27,487.78,1096.5,373.63,1173.48,322.3,143.55,1160.44,947.15,266.88,180.92,304.59,175.84,400.31,1043.99,267.12,1024.23,161.15,863.33,381.06,626.39,436.55,608.09,398.08,599.01,848.51,490.45,437.92,1197.41,311.62,83.81,648.9299999999999,92.78,1137.2,469.77,712.22,318.12,219.26,1170.31,941.65,441.73,649.21,817.41,512.01,550.0700000000001,602.3,267.12,166.05,258.09,438.22,272.93,1101.35,441.67,491.53,469.84,150.58,503.5,1172.9,445.97,166.52,902.37,40.2,1105.01,634.48,1218.15,574.2,149.45,1024.16,382.3,667.79,278.92,415.32,166.05,398.42,390.95,805.75,738.51,398.42,515.75,654.3099999999999,234.99,273.08,308.38],[62823,40000,65000,125000,65000,87000,120000,90000,113409,76000,50000,24000,100000,92000,48000,35000,106000,58380,46128,52000,54625,30000,185000,66920,78000,32000,80000,12000,92000,55000,50000,36000,110000,78000,30000,60000,125000,58500,90000,71000,13728,30000,53000,69000,114416,25252,95000,90000,66000,70000,50000,99000,26000,150000,258000,70000,72000,110000,153000,30000,109000,32000,65000,45000,95000,101400,92000,88000,60000,86000,144000,90000,39000,54000,96000,24000,59000,58000,48000,165000,125000,80000,152000,340000,75500,163000,59000,120000,48000,80000,60000,265000,3120,45000,89000,79040,75000,31000,65000,108000,35000,46000,780000,500000,150000,96500,31500,120000,35000,57500,47418,70000,40000,110000,30000,79000,64000,42000,73000,36224,42000,75000,70000,15000,110000,52499.2,88000,80000,127000,166600,65000,54000,36240,130000,175000,65000,56000,59000,79500,27500,94000,210000,140000,62000,42000,85000,75000,75000,36000,46400,100000,87000,43000,45000,28000,36000,45000,115000,70000,94000,58756,60000,62000,48300,86845,240000,104660,32000,350000,37500,82000,150000,80000,150000,120000,114000,111000,25000,90000,26000,115000,185000,65000,47611.2,125000,50000,150000,53000,140000,61000,125000,40000,66500,85000,17000,11000,73000,106000,72000,48000,72000,30000,39900,100000,60000,54000,106000,115000,68000,108254.9,55000,52000,125000,120000,160000,10000,58000,57564,117000,80000,105000,35000,100000,70000,72612,78000,39600,26000,58000,45000,105000,110000,64000,57000,70000,58250,69000,33000,36000,75696,75000,40000,33000,48000,56400,30000,102500,65800,192000,40000,45000,100000,33000,8000,29000,69000,60000,51000,105000,18000,120000,160000,85000,34800,150000,57000,80000,53800,120000,41000,70000,65000,230000,45000,120000,90000,75000,45000,50000,71000,36000,65000,45000,40000,40000,65000,80000,126000,55000,44000,55000,36000,106000,90000,155000,40000,65000,120000,80000,70000,79000,88000,93000,49000,80000,107000,50000,35000,55000,96800,85000,57000,28000,51921,75000,85000,75000,40000,165000,140000,50000,81000,37000,55000,56000,271000,50000,72800,87500,72000,55000,92000,90000,115000,110000,160000,140000,90000,280000,290000,72000,50000,83000,69000,60000,195000,22362.75,70000,110000,145000,70000,121000,130000,23000,71000,40000,53000,18624,98000,32000,112000,200000,150000,50000,140000,135000,65000,103000,65000,52000,63288,45000,65000,45000,85000,80000,150000,52000,18500,75000,40000,33000,28000,60000,54000,148650,70000,50000,43000,109000,36000,175000,82000,150000,195000,102947,225000,145000,120000,95000,43000,125000,90000,56000,740000,80000,70000,25000,180000,48000,82000,70000,144000,60000,95000,42000,24000,31000,38000,43000,80000,220000,110000,142500,75000,60000,84362,63000,60000,52000,55000,32000,60000,15000,33800,110000,15000,96000,55000,30000,40000,20000,40000,60000,77900,31000,85000,90000,52000,185000,56000,80000,93000,50000,70000,51632,82000,72000,55000,68700,100000,126700,35000,65000,44000,30000,54000,140000,55000,180000,38000,40000,50000,40000,40000,20000,57500,63000,70000,120000,45000,200000,95504,85000,85000,54000,91000,39600,66000,110000,120000,60000,76500,31000,50000,125000,90000,50000,47000,50000,56000,120000,50000,56368,54000,103000,170000,107000,146000,100000,110000,26000,27976,37440,90540,55000,55000,65000,49000,42000,18400,65000,69996,43000,95000,65000,95000,42000,120000,90000,75000,50000,28000,83000,49500,46000,80000,63235,231000,20567,220000,52500,65000,104000,105000,33000,49500,125000,50000,70000,52000,102000,60000,40000,95000,126049,20000,65000,86000,220000,58000,80000,31000,70000,19582.09,75000,100000,40000,62300,95731,60000,119000,45000,110000,25920,68000,32000,115000,80000,72000,180000,72000,98000,89000,185000,76000,33000,70000,55000,289000,35000,160000,50000,69000,30000,116162,52500,45000,35000,32000,92000,80000,135000,68000,30000,57500,87000,63000,50000,70000,32500,60000,48000,87000,41000,66000,95000,140000,67200,45000,85000,52000,33000,32000,51000,30000,29500,42655.99,33186,150000,70000,26000,66200,52000,190000,109000,55000,54000,21800,28000,64000,68000,101500,38000,32760,90000,140000,39000,78000,49000,98000,49000,80000,100000,60000,70000,25000,150000,65000,64000,31000,40000,58000,55213,45000,75000,60000,21000,96000,75000,128000,36400,58000,139000,35000,31972,30000,18720,105000,56000,120000,60000,65000,30600,75000,63695,92000,58000,100000,163000,80000,70000,62400,66000,144000,80000,90000,30000,73000,20000,32000,33000,45000,78000,139000,48000,65000,43000,47000,118500,90000,100000,52000,110000,136000,45000,110000,106080,63000,200000,55000,33000,100000,67000,230000,70000,42000,125000,110000,26694,30000,120000,55000,120000,49000,40000,105000,40000,60000,69467,70000,43000,64000,46500,75000,80000,38600,38000,79547,83004,80000,90000,60600,35000,35000,150000,104000,63500,120000,95000,88300,200000,77000,59000,30000,61000,45000,72000,120000,125000,77000,40825,72000,81526,28000,84000,85000,99000,73000,70000,40000,36000,90000,103000,50000,80000,80000,67000,99097,60000,85000,95543,50000,53500,87600,46000,105000,92000,31000,55000,75000,46000,44000,90000,38000,110000,28000,41000,115000,54200,25992,80000,150000,160000,80000,77000,48222,130000,30000,35000,82000,28000,85000,40000,70000,135000,50000,120700,160000,63000,40000,110000,88000,55000,196000,72000,63000,57000,92000,33000,72200,24000,45000,62000,20000,60000,388000,29000,50000,130000,32000,130000,74000,115000,15000,50000,30000,55000,60000,100000,105000,39000,37000,40000,75000,75000,90000,60000,105000,55000,33000,78000],[39.39,24.06,13.96,8.09,20.13,18.41,12.79,20.59,19.92,25.09,7.24,21.15,4.04,13.03,14.58,10.29,21.06,10.11,34,17.4,24.67,10.88,28.52,12.32,12.29,33.27,6.39,5.2,16.51,18.92,20.48,12.8,5.48,15.54,28.68,27.28,4.63,18.17,7.49,25.56,14.16,13.12,35.53,27.43,3.3,35.5,25.16,19.53,6.53,35.3,10.83,9.91,14.08,39.1,10.8,28.84,27.03,10.39,5.88,30.84,16.89,35.75,8.859999999999999,37.57,22.7,12.16,29.21,38.22,24.14,14.34,23.82,23.13,8.74,22.67,13.33,39.55,25.94,20.28,15.15,23.2,19.62,26.43,10.34,7.72,19.3,6.46,5.26,23.82,15.23,34.28,37.12,5.3,215.38,11.97,23.72,29.97,31.04,23.96,24,2.99,31.34,37.44,3.1,8.68,17.83,2.38,13.78,18.7,1.85,18.95,14.03,33.39,27.69,20.25,17.5,13.53,25.67,19.54,22.78,7.86,14.89,27.63,26.13,70.48,15.27,26.29,18.32,11.3,21.48,21.26,7.96,25.14,22.75,36.58,25.43,47.67,32.32,25.43,11.03,13.66,17.27,13.67,14.23,19.71,17.14,13.14,30.62,13.78,7.4,34.24,38.45,13.44,4.13,53.41,31.76,7.27,14.45,11.58,48.23,16.66,29.76,31.18,21.93,33.89,17.37,9.49,29.41,37.06,10.28,12.71,26.5,12.4,12.63,21.92,40.7,13.02,14.29,8.35,14.89,1.15,14.86,22.62,15.68,20.09,6.42,80.75,33.23,16.42,9.890000000000001,32.74,27.94,8.4,14.37,53.25,34.39,8.949999999999999,16.13,29.4,28.04,7.38,17.18,34.68,5.89,26.61,28.02,9.779999999999999,8.23,3.41,18.23,8.710000000000001,13.71,10.11,25.07,13.03,8.74,0,14.08,31.75,27.86,21.36,17.33,10.67,7.85,22.33,12.38,22.05,14.64,22.76,25.37,13.71,22.1,7.38,17.16,9.07,17.38,15.64,41.1,30.91,8.869999999999999,18.2,9.92,22.38,22.25,11.95,1.98,32.58,3.52,28.07,13.19,14.93,62.7,15.1,34.63,144.74,27.61,27.74,23.38,14.85,17.68,25.33,21.8,6.59,11.2,5.52,26.66,27.48,24.09,18.45,14.73,25.7,20.7,14.73,9.19,27.28,8.74,27.79,26.21,7.01,15.89,17.67,33.96,35.91,11.97,11.4,14.67,17.45,27.86,9.960000000000001,35.78,34,25.49,19,22.26,24.84,10.91,12.54,16.06,11.13,15.5,26.62,29.17,12.21,22.63,25.84,27.5,9.789999999999999,17.23,12.04,20.55,0.25,4.44,27.03,12.39,31.53,3.82,25.62,11.2,14.34,14.1,21.85,18.67,3.23,20.99,22.67,8.74,20.72,13.17,7.78,5.6,2.2,10.91,19.73,10.33,17.64,18.85,17.34,7.89,11.31,13.27,19.34,18.45,16.13,12.29,24.12,32.04,3.77,1.88,11.98,18.69,11.18,25.3,12.64,5.98,32.62,3.59,29.67,22.88,20.49,23.6,12.72,20.56,10.67,38.43,33.7,11.63,17.42,12.98,14.69,13.53,22.2,22.24,32.67,11.39,40.96,23.65,22.65,13.06,17.93,34.39,5.82,11.4,27.72,19.76,55.25,28.16,0.53,3.82,36.75,11.81,17.68,42.67,6.42,9.880000000000001,19.69,17.95,17.59,20.53,14.66,8.17,35.95,19.15,34.89,18.42,6.79,3.41,15.51,21.12,18.24,8.83,13.29,7.08,16.6,22.37,15,16.79,26.09,15.5,6.25,11.5,0.7,14.44,1.44,32.1,10.26,23.49,23.7,24.82,17.35,18.46,16.29,27.86,4.91,20.16,20.48,16.66,31.18,50.32,30.28,21.53,34.72,19.68,47.6,12.63,19.52,34.65,30.89,6.48,19.49,3.34,23.77,14.23,25.59,24.61,15.41,10.94,34.38,13.65,19.4,33.78,13.4,26.85,32.42,13.07,8.81,61.18,5.48,22.82,8.699999999999999,41.24,11.71,3.02,19.44,28.59,14.4,36.54,33.31,16.18,13.11,21.19,14.66,15.44,3.96,26.1,18.58,9.85,25.09,24.99,4.55,9.550000000000001,22.52,7.52,22.94,27.48,15.95,15.19,14.23,18.65,18.63,16.11,29.44,35.75,9.449999999999999,19.61,22.08,12.98,27.48,18.14,29.36,9.83,31.48,18.61,37.26,18.19,23.46,15.92,15.84,36.9,7.22,10.85,17.29,43.57,4.87,17.66,20.26,33.07,14.38,21.05,21.77,20.45,7.96,29.65,8.25,8.960000000000001,10.57,9.5,8.640000000000001,39.97,10.32,10.41,6.71,7.52,33.12,9.380000000000001,2.7,22.54,21.93,15.3,2.76,52.78,17.83,11.29,2.19,10.48,9.27,15.16,18.11,17.17,23.69,19.54,19.42,22.26,18.15,29.89,12.62,20.23,9.44,19.85,16.23,34.11,19.64,17.64,30.51,27.52,34.15,41.94,24.48,22.62,12.89,18.24,44.9,7.31,26.38,1.95,11.24,12.56,15.06,27.02,25.9,7.55,13.22,31.68,18.25,26.33,19.65,30.8,6.57,22.56,30.93,18.79,14.72,26.73,27.56,4.18,19.94,22.56,25.3,29.49,11.06,13.32,9.119999999999999,25.07,3.3,11.26,7.37,41.51,34.7,16.27,11.85,12.63,10.59,16.21,17.75,15.67,35.18,19.13,21.91,27.99,11.62,9.48,22.38,14.2,18.61,12.73,9.550000000000001,8.24,19.43,16.56,16.87,8.76,10.46,15.56,11.44,25.96,15.07,17,19.83,15.02,13.72,15.09,15.6,7.58,27.53,17.32,11.5,26.88,27.12,15.51,23.17,26.43,23.65,25.01,16.26,29.07,24.69,16.81,13.52,23.02,2.97,9.41,23.52,16.3,42.93,1.76,13.5,36.52,12.34,10.52,32.36,7.78,36.69,13.66,12.24,30.72,40.75,16.13,20.5,18.22,12.39,8.960000000000001,4.98,13.86,5.55,39.27,20.95,39.88,24.17,32.37,18.84,24.33,0,24.53,33.71,20.89,4.48,28.04,24.53,30.71,3.8,18.23,26.01,17.64,24.37,11.05,18.87,22.82,10.77,15.91,22.79,27.05,5.39,15.46,10.33,8.68,33.7,14.59,20.33,3.57,10.36,7.72,8.18,19.83,18.72,15.36,25.29,13.69,3.27,12.54,3.18,31.72,17.71,17.81,25.9,22.95,41.73,1.36,5.52,11.88,46.08,22.18,18.29,18.3,5.81,49.68,40.12,24.7,17.37,33.84,0.95,7.74,19.74,7.37,22.26,20.14,14.24,32,1.08,16.97,24.67,9.94,17.2,19.95,6.7,5.03,9.23,60.65,28.97,11.89,56.82,39.08,4.73,16.35,31.67,17.41,18.16,29.4,18.09,8.27,15.33,10.95,26.46,7.92,8.16,3.62,32.72,20.01,12.99,21.68,5.86,1.94,14.4,7.04,23.24,20.24,28.33,25.55,21.14,7.16,29.07,10.49,35.27,9.25,29.36,31.58,5.23,20.84,11.92,12.22,9.779999999999999,22.24,18.4,14.18,16.89,30.61,16.86,17.56,5.07,30.85,40.46,5.96,0.95,16.77,10.67,17.84,22.21,11.21,26.42,5.31,19.16,31.61,27.93,49.98,16.15,13.04,17.42,32.65,23.7,8.93,33.77,32.14,19.18,25.84,29.31,14.39,27.72,7.2,12.41,62.48,11.3,20.06,21.05,17.79,5.23,3.7,16.56,17.51,19.28,16.01,14,22.7,25.27,28.62,4.22]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>loan_default<\/th>\n      <th>loan_purpose<\/th>\n      <th>missed_payment_2_yr<\/th>\n      <th>loan_amount<\/th>\n      <th>interest_rate<\/th>\n      <th>installment<\/th>\n      <th>annual_income<\/th>\n      <th>debt_to_income<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"ordering":true,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We use an interactive table to display the loans dataset, allowing for a clearer view of the loan data. This view will serve as the base for exploratory and feature engineering tasks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(loans)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 872
Columns: 8
$ loan_default        &lt;fct&gt; no, yes, no, no, yes, yes, no, no, no, no, no, yes…
$ loan_purpose        &lt;fct&gt; debt_consolidation, medical, small_business, small…
$ missed_payment_2_yr &lt;fct&gt; no, no, no, no, yes, no, no, no, yes, no, no, no, …
$ loan_amount         &lt;int&gt; 25000, 10000, 13000, 36000, 12000, 13000, 10000, 4…
$ interest_rate       &lt;dbl&gt; 5.47, 10.25, 6.22, 5.97, 11.75, 13.25, 10.47, 7.97…
$ installment         &lt;dbl&gt; 855.42, 363.79, 441.73, 1152.01, 307.67, 333.31, 3…
$ annual_income       &lt;dbl&gt; 62823, 40000, 65000, 125000, 65000, 87000, 120000,…
$ debt_to_income      &lt;dbl&gt; 39.39, 24.06, 13.96, 8.09, 20.13, 18.41, 12.79, 20…</code></pre>
</div>
</div>
</section>
<section id="statistical-summary-of-the-dataset" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Statistical Summary of the Dataset</h1>
<p>A statistical summary helps in understanding the basic distributions and ranges of numeric variables in the dataset. This summary includes important measures like mean, standard deviation, and range for each feature.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>statistical_summary <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">describe</span>(loans)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(statistical_summary,<span class="at">caption =</span> <span class="st">"Loans Dataset Statistical summary"</span>,<span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-29b32fc66ee683b26b42" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-29b32fc66ee683b26b42">{"x":{"filter":"none","vertical":false,"caption":"<caption>Loans Dataset Statistical summary<\/caption>","data":[["loan_default*","loan_purpose*","missed_payment_2_yr*","loan_amount","interest_rate","installment","annual_income","debt_to_income"],[1,2,3,4,5,6,7,8],[872,872,872,872,872,872,872,872],[1.613532110091743,2.694954128440367,1.884174311926605,17469.38073394496,10.76176605504587,517.3469151376147,79333.51735091743,19.5916628440367],[0.4872193426282804,1.378387299649841,0.3201994310822979,10396.7658253685,3.956238295013216,307.0125704977403,58590.34041777987,13.42758995830085],[2,3,2,15700,10.22,451.46,67000,17.8],[1.641833810888252,2.6189111747851,1.979942693409742,16761.10315186247,10.4582664756447,490.7135100286533,71115.71244985673,18.4556446991404],[0,1.4826,0,11416.02,4.077149999999999,300.1523700000001,35582.4,10.393026],[1,1,1,1000,4.72,36.19,3120,0],[2,5,2,40000,20,1566.59,780000,215.38],[1,4,1,39000,15.28,1530.4,776880,215.38],[-0.4655066118928842,0.1949396636963563,-2.396842141524621,0.4930449904934991,0.5926376358765234,0.6973925654160574,4.953843496584723,4.97648565569708],[-1.785347066778194,-1.290940697120024,3.749155685720402,-0.7393922844279071,-0.5640809903318775,-0.2082673147524856,45.71889950037861,59.68979721531434],[0.01649932886566466,0.04667808391697893,0.01084332097228791,352.0789169959802,0.1339751339678661,10.39675752446461,1984.119287402205,0.454715573072658]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>vars<\/th>\n      <th>n<\/th>\n      <th>mean<\/th>\n      <th>sd<\/th>\n      <th>median<\/th>\n      <th>trimmed<\/th>\n      <th>mad<\/th>\n      <th>min<\/th>\n      <th>max<\/th>\n      <th>range<\/th>\n      <th>skew<\/th>\n      <th>kurtosis<\/th>\n      <th>se<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"ordering":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11,12,13]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="correlation-analysis" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Correlation Analysis</h1>
<p>To investigate relationships among variables, we generate a correlation plot, which helps identify highly correlated features that may be redundant for the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>correlation <span class="ot">&lt;-</span> <span class="fu">cor</span>(loans[,<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>)],<span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(correlation,<span class="at">method =</span> <span class="st">"number"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Tree_based_models_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>We can observe that there’s a high correlation between interest rate and installement variable which can lead to bayesed results. this is a problem we have to deal with.</li>
</ul>
</section>
<section id="data-splitting" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Data Splitting</h1>
<p>To ensure a fair evaluation of the model, we split the dataset into training and testing sets. We stratify on loan_default to maintain the same proportion of defaults across both sets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>loans_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(loans,<span class="at">strata =</span> loan_default,<span class="at">prop =</span> .<span class="dv">8</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>loans_training <span class="ot">&lt;-</span> <span class="fu">training</span>(loans_split)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>loans_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(loans_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="feature-engineering-and-data-preprocessing" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Feature Engineering and Data Preprocessing</h1>
<p>Feature engineering is a critical step that prepares the data for model training. Here, we set up a recipe that performs normalization, correlation filtering, and dummy encoding for categorical variables. ## Building a recipe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>loans_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(loans_training,<span class="at">formula =</span> loan_default <span class="sc">~</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="creating-cross-validation-folds" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="creating-cross-validation-folds"><span class="header-section-number">5.1</span> Creating cross validation folds</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>loans_cv <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(<span class="at">data =</span> loans_training,<span class="at">v =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="model-selection-and-comparison" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Model Selection and Comparison</h1>
<p>In this project, we evaluate four tree-based models: Decision Trees, Bagged Trees, Random Forests, and Boosted Trees. Each model has unique characteristics and approaches to handling data, making them suitable for different scenarios. Below is a brief overview of each:</p>
<section id="decision-tree" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="decision-tree"><span class="header-section-number">6.1</span> 1. Decision Tree</h2>
<p>A basic Decision Tree is a flowchart-like structure where internal nodes represent tests on a feature, branches represent the outcomes, and leaf nodes represent the final predictions. It is easy to interpret but can overfit on complex data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dtree_model <span class="ot">&lt;-</span> <span class="fu">decision_tree</span>(<span class="at">tree_depth =</span> <span class="fu">tune</span>(),<span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bagged-trees" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="bagged-trees"><span class="header-section-number">6.2</span> 2. Bagged Trees</h2>
<p>Bagged Trees involve creating multiple decision trees using bootstrapped samples of the data and averaging their predictions. This method helps reduce variance and mitigates overfitting.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that this is the slowest model due to the nature of the algorithm.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>bagged_tree <span class="ot">&lt;-</span> <span class="fu">bag_tree</span>(<span class="at">tree_depth =</span> <span class="fu">tune</span>(),<span class="at">min_n =</span> <span class="fu">tune</span>(),<span class="at">cost_complexity =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>, <span class="at">times =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="random-forest" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="random-forest"><span class="header-section-number">6.3</span> 3. Random Forest</h2>
<p>Random Forests further enhance bagging by adding randomness in feature selection at each split. This helps in reducing the correlation between trees, making it more robust.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>random_forest <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(<span class="at">trees =</span> <span class="fu">tune</span>(),<span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="boosted-trees" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="boosted-trees"><span class="header-section-number">6.4</span> 4. Boosted Trees</h2>
<p>Boosted Trees are an ensemble technique where each subsequent tree focuses on the residuals of the previous trees, improving areas where errors were made. This model is known for high accuracy on complex data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>boosted_tree <span class="ot">&lt;-</span> <span class="fu">boost_tree</span>(<span class="at">tree_depth =</span> <span class="fu">tune</span>(),<span class="at">trees =</span> <span class="fu">tune</span>(),<span class="at">learn_rate =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="hyperparameter-tuning-grids" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="hyperparameter-tuning-grids"><span class="header-section-number">6.5</span> Hyperparameter Tuning Grids</h2>
<p>We use grid search to tune hyperparameters for each model. Each grid search produces a range of parameter combinations, allowing us to select the best-performing set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dtree_parameters_grid <span class="ot">&lt;-</span> <span class="fu">grid_random</span>(<span class="fu">parameters</span>(dtree_model),<span class="at">size =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `parameters.model_spec()` was deprecated in tune 0.1.6.9003.
ℹ Please use `hardhat::extract_parameter_set_dials()` instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>bagged_tree_params <span class="ot">&lt;-</span> <span class="fu">grid_random</span>(<span class="fu">parameters</span>(bagged_tree),<span class="at">size =</span> <span class="dv">15</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>random_forest_params <span class="ot">&lt;-</span> <span class="fu">grid_random</span>(<span class="fu">parameters</span>(random_forest),<span class="at">size =</span> <span class="dv">15</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>boosted_tree_params <span class="ot">&lt;-</span> <span class="fu">grid_random</span>(<span class="fu">parameters</span>(boosted_tree),<span class="at">size =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="workflow-and-model-training" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Workflow and Model Training</h1>
<p>Each model is defined within a workflow, combining the recipe with the model specification. The workflow enables efficient training and validation.</p>
<section id="decision-tree-workflow" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="decision-tree-workflow"><span class="header-section-number">7.1</span> Decision Tree Workflow</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dtree_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(loans_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(dtree_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bagged-tree-workflow" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="bagged-tree-workflow"><span class="header-section-number">7.2</span> Bagged Tree Workflow</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>bagged_tree_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(loans_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(bagged_tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="random-forest-workflow" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="random-forest-workflow"><span class="header-section-number">7.3</span> Random Forest Workflow</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>randomforest_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(loans_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(random_forest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="boosted-tree-workflow" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="boosted-tree-workflow"><span class="header-section-number">7.4</span> Boosted Tree Workflow</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>boosted_tree_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(loans_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(boosted_tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="model-fitting-with-cross-validation" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Model Fitting with Cross-Validation</h1>
<p>Each model is fit using cross-validation to assess its performance across different hyperparameter configurations.</p>
<section id="decision-tree-1" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="decision-tree-1"><span class="header-section-number">8.1</span> Decision Tree</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dtree_fit <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(dtree_workflow,<span class="at">grid =</span> dtree_parameters_grid,<span class="at">resamples =</span> loans_cv,<span class="at">metrics =</span> <span class="fu">metric_set</span>(roc_auc,accuracy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bagged-tree" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="bagged-tree"><span class="header-section-number">8.2</span> Bagged Tree</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>bagged_tree_fit <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(bagged_tree_workflow,<span class="at">grid =</span> bagged_tree_params,<span class="at">resamples =</span> loans_cv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="random-forest-1" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="random-forest-1"><span class="header-section-number">8.3</span> Random Forest</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>random_forest_fit <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(randomforest_workflow,<span class="at">grid =</span> random_forest_params,<span class="at">resamples =</span> loans_cv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: le package 'ranger' a été compilé avec la version R 4.3.3</code></pre>
</div>
</div>
</section>
</section>
<section id="boosted-tree" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Boosted Tree</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>boosted_tree_fit <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(boosted_tree_workflow,<span class="at">grid =</span> boosted_tree_params,<span class="at">resamples =</span> loans_cv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: le package 'xgboost' a été compilé avec la version R 4.3.3</code></pre>
</div>
</div>
</section>
<section id="model-comparison-and-evaluation" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Model Comparison and Evaluation</h1>
<p>Each model’s performance is summarized, displaying metrics such as minimum, maximum, mean, and median for both accuracy and ROC AUC. This allows us to understand the variability and reliability of each model.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Random Forest</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Decision Tree</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Bagged Trees</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">Boosted Trees</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>rand_forest_results <span class="ot">&lt;-</span> random_forest_fit <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.metric) <span class="sc">%&gt;%</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(.estimate),<span class="at">max =</span> <span class="fu">max</span>(.estimate),<span class="at">mean =</span> <span class="fu">mean</span>(.estimate),<span class="at">median =</span> <span class="fu">median</span>(.estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(., <span class="dv">3</span>)))</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(rand_forest_results,<span class="at">rownames =</span> <span class="cn">FALSE</span>,<span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-06359310a66b926578f3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-06359310a66b926578f3">{"x":{"filter":"none","vertical":false,"data":[["accuracy","roc_auc"],[0.741,0.8149999999999999],[0.849,0.905],[0.793,0.86],[0.793,0.864]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>.metric<\/th>\n      <th>min<\/th>\n      <th>max<\/th>\n      <th>mean<\/th>\n      <th>median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"ordering":false,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>decision_tree_results <span class="ot">&lt;-</span> dtree_fit <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.metric) <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(.estimate),<span class="at">max =</span> <span class="fu">max</span>(.estimate),<span class="at">mean =</span> <span class="fu">mean</span>(.estimate),<span class="at">median =</span> <span class="fu">median</span>(.estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(., <span class="dv">3</span>)))</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(decision_tree_results,<span class="at">rownames =</span> <span class="cn">FALSE</span>,<span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d7bd2c7fc7695aecb9cd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d7bd2c7fc7695aecb9cd">{"x":{"filter":"none","vertical":false,"data":[["accuracy","roc_auc"],[0.748,0.742],[0.871,0.884],[0.788,0.787],[0.779,0.752]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>.metric<\/th>\n      <th>min<\/th>\n      <th>max<\/th>\n      <th>mean<\/th>\n      <th>median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"ordering":false,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>bagged_trees_results <span class="ot">&lt;-</span> bagged_tree_fit <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.metric) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(.estimate),<span class="at">max =</span> <span class="fu">max</span>(.estimate),<span class="at">mean =</span> <span class="fu">mean</span>(.estimate),<span class="at">median =</span> <span class="fu">median</span>(.estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(., <span class="dv">3</span>)))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(bagged_trees_results,<span class="at">rownames =</span> <span class="cn">FALSE</span>,<span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b9da40f538c2217e544a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b9da40f538c2217e544a">{"x":{"filter":"none","vertical":false,"data":[["accuracy","roc_auc"],[0.755,0.735],[0.871,0.91],[0.793,0.841],[0.779,0.852]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>.metric<\/th>\n      <th>min<\/th>\n      <th>max<\/th>\n      <th>mean<\/th>\n      <th>median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"ordering":false,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>boosted_trees_results <span class="ot">&lt;-</span> boosted_tree_fit <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.metric) <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(.estimate),<span class="at">max =</span> <span class="fu">max</span>(.estimate),<span class="at">mean =</span> <span class="fu">mean</span>(.estimate),<span class="at">median =</span> <span class="fu">median</span>(.estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(., <span class="dv">3</span>)))</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(boosted_trees_results,<span class="at">rownames =</span> <span class="cn">FALSE</span>,<span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-31797a65b1041d60d013" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-31797a65b1041d60d013">{"x":{"filter":"none","vertical":false,"data":[["accuracy","roc_auc"],[0.712,0.8129999999999999],[0.842,0.911],[0.775,0.855],[0.77,0.853]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>.metric<\/th>\n      <th>min<\/th>\n      <th>max<\/th>\n      <th>mean<\/th>\n      <th>median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"ordering":false,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>the best model was boosted trees with the highest roc_auc among all models.</p>
</div>
</div>
</section>
<section id="selecting-and-finalizing-the-best-model" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Selecting and Finalizing the Best Model</h1>
<p>From the comparison, we select the boosted tree model as it achieves the highest ROC AUC score. We then finalize this model using the best parameters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>best_model <span class="ot">&lt;-</span> <span class="fu">select_best</span>(boosted_tree_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: No value of `metric` was given; metric 'roc_auc' will be used.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>best_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  trees tree_depth learn_rate .config              
  &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;                
1  1678          1     0.0462 Preprocessor1_Model02</code></pre>
</div>
</div>
</section>
<section id="final-model-evaluation" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Final Model Evaluation</h1>
<p>After selecting the best model, we evaluate its performance on the test set using metrics such as accuracy, sensitivity, specificity, and ROC curve.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>last_workflow <span class="ot">&lt;-</span> boosted_tree_workflow <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(best_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="model-last-fit" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Model Last fit</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>last_model <span class="ot">&lt;-</span> last_workflow <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(<span class="at">split =</span> loans_split,<span class="at">metrics =</span> <span class="fu">metric_set</span>(roc_auc,accuracy))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>last_model <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric  .estimator .estimate .config             
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary         0.834 Preprocessor1_Model1
2 roc_auc  binary         0.895 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="confusion-matrix" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> Confusion matrix</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>last_model <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(<span class="at">truth =</span> loan_default,<span class="at">estimate =</span> .pred_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Truth
Prediction yes no
       yes  49 10
       no   19 97</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>custom_metrics <span class="ot">&lt;-</span> <span class="fu">metric_set</span>(sens,spec)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> last_model <span class="sc">%&gt;%</span> <span class="fu">collect_predictions</span>()</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">custom_metrics</span>(predictions, <span class="at">truth =</span> loan_default,<span class="at">estimate =</span> .pred_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 sens    binary         0.721
2 spec    binary         0.907</code></pre>
</div>
</div>
</section>
<section id="roc-curve" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> Roc Curve</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>last_model <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">roc_curve</span>(<span class="at">truth =</span> loan_default,.pred_yes) <span class="sc">%&gt;%</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Tree_based_models_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="feature-importance" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Feature importance</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>vip<span class="sc">::</span><span class="fu">vip</span>(last_model<span class="sc">$</span>.workflow[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Tree_based_models_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>We can observe the most important feature is interest rate.</li>
</ul>
</section>
<section id="conclusion" class="level1" data-number="17">
<h1 data-number="17"><span class="header-section-number">17</span> Conclusion</h1>
<p>The analysis concludes that the boosted tree model with the selected hyperparameters is the most suitable for predicting loan defaults in this dataset, offering an optimal balance of interpretability and predictive accuracy.</p>
</section>

</main>
<!-- /main column -->


&nbsp;
<hr>

<p style="text-align: center;">A work by <a href="https://github.com/imdad19">Imed Eddine Aouidane</a></p>

<p style="text-align: center;"><span style="color: #808080;"><em>aouidaneimad@gmail.com</em></span></p>



<!-- Add icon library -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



<!-- Add font awesome icons -->

<p style="text-align: center;">

    <a href="www.linkedin.com/in/imed-eddine-aouidane-152b17201" class="fa fa-linkedin"></a>

    <a href="https://github.com/imdad19" class="fa fa-github"></a>

</p>



&nbsp;
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>